<!DOCTYPE html>
<html>
<head>
    <title>User ID Sync Test</title>
</head>
<body>
    <h1>User ID Synchronization Test</h1>
    <p><strong>JavaScript User ID:</strong> <span id="jsUserId"></span></p>
    <p><strong>C# User ID would be:</strong> <span id="csharpUserId"></span></p>

    <script>
        // JavaScript version (from coordinator.html)
        function hashCode(str) {
            let hash = 0;
            for (let i = 0; i < str.length; i++) {
                const char = str.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash; // Convert to 32bit integer
            }
            return hash;
        }

        function getJavaScriptUserId() {
            const sharedUserId = "shared_user_" + new Date().toISOString().slice(0, 10).replace(/-/g, '');
            const hash = Math.abs(hashCode(sharedUserId));
            return 'user_' + hash.toString(16);
        }

        // C# version simulation (from CoordinatorChat.razor.cs)
        function getCSharpUserId() {
            // Simulate C# DateTime.Now.ToString("yyyyMMdd")
            const now = new Date();
            const yyyymmdd = now.getFullYear().toString() +
                           (now.getMonth() + 1).toString().padStart(2, '0') +
                           now.getDate().toString().padStart(2, '0');

            const sharedUserId = "shared_user_" + yyyymmdd;
            const hash = Math.abs(hashCode(sharedUserId));
            return 'user_' + hash.toString(16);
        }

        // Display results
        document.getElementById('jsUserId').textContent = getJavaScriptUserId();
        document.getElementById('csharpUserId').textContent = getCSharpUserId();

        console.log('JavaScript User ID:', getJavaScriptUserId());
        console.log('C# User ID (simulated):', getCSharpUserId());
    </script>
</body>
</html>